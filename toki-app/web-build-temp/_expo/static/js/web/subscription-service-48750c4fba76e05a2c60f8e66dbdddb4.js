__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.createCheckoutSession=t,e.redirectToCheckout=async function(o){try{const n=await t(o);if('undefined'==typeof window)throw new Error('Redirection non disponible dans cet environnement');window.location.href=n}catch(o){throw console.error('[Subscription Service] Erreur redirection checkout:',o),o}},e.getCustomerPortalUrl=async function(o){try{throw console.warn('[Subscription Service] Stripe Customer Portal non encore configur\xe9'),new Error('La gestion d\'abonnement n\'est pas encore disponible. Veuillez contacter le support.')}catch(o){throw console.error('[Subscription Service] Erreur r\xe9cup\xe9ration Customer Portal:',o),new Error(o.message||'Erreur lors de la r\xe9cup\xe9ration du portail client')}};var o=r(d[0]),n=r(d[1]);async function t(t){if(!n.FIREBASE_ENABLED)throw new Error('Firebase n\'est pas activ\xe9');try{const n=(0,o.getFunctions)(),c=(0,o.httpsCallable)(n,'createCheckoutSession'),s=(await c({userId:t,successUrl:'undefined'!=typeof window?`${window.location.origin}/subscription?success=true`:void 0,cancelUrl:'undefined'!=typeof window?`${window.location.origin}/subscription?canceled=true`:void 0})).data;if(!s.url)throw new Error('URL de checkout non retourn\xe9e');return s.url}catch(o){throw console.error('[Subscription Service] Erreur cr\xe9ation checkout session:',o),new Error(o.message||'Erreur lors de la cr\xe9ation de la session de paiement')}}},971,[1533,857]);